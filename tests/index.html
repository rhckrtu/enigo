<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enigo Universal Test</title>
</head>

<body>
    <h1>Conducted tests</h1>
    <form action="/action_page.php">
        <input type="checkbox" id="KeyDown" name="KeyDown">
        <label for="KeyDown"> KeyDown</label><br>
        <input type="checkbox" id="KeyUp" name="KeyUp">
        <label for="KeyUp"> KeyUp</label><br>
        <input type="checkbox" id="MouseDown" name="MouseDown">
        <label for="MouseDown"> MouseDown</label><br>
        <input type="checkbox" id="MouseUp" name="MouseUp">
        <label for="MouseUp"> MouseUp</label><br>
        <input type="checkbox" id="MouseMove" name="MouseMove">
        <label for="MouseMove"> MouseMove</label><br>
        <input type="checkbox" id="MouseScroll" name="MouseScroll">
        <label for="MouseScroll"> MouseScroll</label><br>
    </form>

    <p id="output1">Test did not start. Do you have JavaScript enabled?</p>
    <script>
        const ws = new WebSocket('ws://localhost:26541');
        ws.addEventListener('open', (event) => {
            const message = `Open`;
            console.log(message);
            ws.send(message);
            document.getElementById('output1').innerHTML = 'Test was started. Do not close the page.';
        });
        ws.addEventListener('close', (event) => {
            const message = `Close`;
            console.log(message);
            ws.send(message);
            document.getElementById('output1').innerHTML = 'Test concluded. Close this page.';
        });
        document.addEventListener('keydown', (event) => {
            const message = `KeyDown(${event.key})`;
            console.log(message);
            document.getElementById("KeyDown").checked = true;
            ws.send(message);
        });
        document.addEventListener('keyup', (event) => {
            const message = `KeyUp(${event.key})`;
            console.log(message);
            document.getElementById("KeyUp").checked = true;
            ws.send(message);
        });
        document.addEventListener('mousedown', (event) => {
            const message = `MouseDown(${event.button})`;
            console.log(message);
            document.getElementById("MouseDown").checked = true;
            ws.send(message);
        });
        document.addEventListener('mouseup', (event) => {
            const message = `MouseUp(${event.button})`;
            console.log(message);
            document.getElementById("MouseUp").checked = true;
            ws.send(message);
        });
        document.addEventListener('mousemove', (event) => {
            const message = `MouseMove((${event.movementX},${event.movementY}),(${event.screenX},${event.screenY}))`;
            console.log(message);
            document.getElementById("MouseMove").checked = true;
            ws.send(message);
        });
        document.addEventListener('mousewheel', (event) => {
            const message = `MouseScroll(${event.deltaX},${event.deltaY})`;
            console.log(message);
            document.getElementById("MouseScroll").checked = true;
            ws.send(message);
        });
    </script>
</body>

</html>